!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.loder=t():r.loder=t()}("undefined"!=typeof self?self:this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return r[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var e={};return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=1)}([function(r,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a=t.isType=function(r){return function(t){return(void 0===t?"undefined":n(t))==r}},o=(t.isString=function(r){return a("string")(r)},t.isArray=function(r){return a("object")(r)&&!!r.slice});t.isFunction=function(r){return a("function")(r)},t.isBoolean=function(r){return a("boolean")(r)},t.isPlainObject=function(r){return a("object")(r)&&!o(r)},t.isUndefined=function(r){return a("undefined")(r)},t.isPromise=function(r){return r instanceof Promise},t.isReg=function(r){return r instanceof RegExp},t.noop=function(){}},function(r,t,e){"use strict";function n(r){return r&&r.__esModule?r:{default:r}}var a=e(2),o=n(a),i=e(0),u=e(6);u.route=function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.noop;if(!u.get("_isRouteAlreadyExecuted")){var n=void 0;(0,i.isFunction)(t)&&(e=t,t=!1),t=u.configure.isHashRouter||t,t&&location.hash?n=o.default.fromString(r).match(location.hash.slice(1)):t||(n=o.default.fromString(r).match(location.pathname)),n&&n.pathParams&&(u.set("_isRouteAlreadyExecuted",!0),e(n.pathParams))}},r.exports=u},function(r,t,e){function n(){return[].slice.call(arguments).reduce(function(r,t){for(var e in t)r[e]=t[e];return r},{})}function a(r){var t=/([^\?#]*)?(\?[^#]*)?(#.*)?$/,e=t.exec(r);return{path:e[1]||"",queryString:e[2]&&e[2].substring(1)||"",hash:e[3]&&e[3].substring(1)||""}}var o=e(3),i=function(){function r(r){this.params=r.params,this.allowWildcards=r.allowWildcards,this.routeString=r.routeString}return r.prototype.matches=function(r){for(var t,e=(r||"").split("&").reduce(function(r,t){var e=t.split("="),n=e[0],a=e[1];return n&&(r[n]=a),r},{}),n=[].concat(this.params);t=n.shift();){if(!e.hasOwnProperty(t.key))return!1;if(t.value&&e[t.key]!=t.value)return!1}return!(!this.allowWildcards&&this.params.length&&Object.getOwnPropertyNames(e).length>this.params.length)},r.prototype.match=function(r){if(!this.matches(r))return null;var t={params:[],namedParams:{},namedQueryParams:{}};if(!r)return t;var e=this.params.reduce(function(r,t){return r[t.key]=t.name,r},{}),n=o.parse(r);return Object.keys(n).forEach(function(r){var a=n[r];t.params.push(a),e[r]&&(t.namedQueryParams[e[r]]=t.namedParams[e[r]]=a)}),t},r.fromString=function(t){var e={routeString:t,allowWildcards:!1,params:[]};return t.split("&").forEach(function(r){if(r){var t=r.split("="),n=t[0],a=t[1]||"",o=!1,i={key:n};":"==a.charAt(0)?i.name=a.substring(1):"*"==n&&""==a?o=e.allowWildcards=!0:i.value=a,o||e.params.push(i)}}),new r(e)},r}(),u=function(){function r(r){this.regexp=r.regexp,this.params=r.params,this.routeString=r.routeString}var t=/:\w+/g,e=/\*\w+/g,n=/(:[^\/\.]+)|(\*\w+)/g,a=/\*/g,o=/[-[\]{}()+?.,\\^$|#\s]/g;return r.prototype.matches=function(r){return this.regexp.test(r)},r.prototype.match=function(r){if(!this.matches(r))return null;var t={params:[],namedParams:{}};return(this.regexp.exec(r)||[]).slice(1).forEach(function(r,e){void 0!==r&&(r=decodeURIComponent(r)),t.namedParams[this.params[e]]=r,t.params.push(r)},this),t},r.routePathToRegexp=function(r){return r=r.replace(o,"\\$&").replace(t,"([^/]+)").replace(e,"(.*)?").replace(a,".*?").replace(/\/?$/,"/?"),new RegExp("^/?"+r+"$")},r.fromString=function(t){return t=t.split(/\?|#/)[0],new r({routeString:t,regexp:r.routePathToRegexp(t),params:(t.match(n)||[]).map(function(r){return r.substring(1)})})},r}(),s=function(){function r(r){this.regex=r}return r.prototype.matches=function(r){return this.regex.test(r)},r.prototype.match=function(r){if(!this.matches(r))return null;var t=a(r);return{params:this.regex.exec(r).slice(1),queryParams:o.parse(t.queryString),namedParams:{}}},r}(),c=function(){function r(r){this.pathPattern=r.pathPattern,this.queryStringPattern=r.queryStringPattern,this.hashPattern=r.hashPattern,this.routeString=r.routeString}return r.prototype.matches=function(r){var t=a(r);return(!this.pathPattern||this.pathPattern.matches(t.path))&&(!this.queryStringPattern||this.queryStringPattern.matches(t.queryString))&&(!this.hashPattern||this.hashPattern.matches(t.hash))},r.prototype.match=function(r){if(!this.matches(r))return null;var t,e,i=a(r),u={params:[],namedParams:{},pathParams:{},queryParams:o.parse(i.queryString),namedQueryParams:{},hashParams:{}},s=function(r){u.params=u.params.concat(r.params),u.namedParams=n(u.namedParams,r.namedParams)};return(e=this.pathPattern)&&(t=e.match(i.path),t&&s(t),u.pathParams=t?t.namedParams:{}),(e=this.queryStringPattern)&&(t=e.match(i.queryString),t&&s(t),u.namedQueryParams=t?t.namedQueryParams:{}),(e=this.hashPattern)&&(t=e.match(i.hash),t&&s(t),u.hashParams=t?t.namedParams:{}),u},r.fromString=function(t){var e=a(t),n=e.path,o=e.queryString||t.indexOf("?")>-1,s=e.hash||t.indexOf("#")>-1;return new r({pathPattern:n&&u.fromString(e.path),queryStringPattern:o&&i.fromString(e.queryString),hashPattern:s&&u.fromString(e.hash),routeString:t})},r}();r.exports=c,c.QueryStringPattern=i,c.PathPattern=u,c.RegExpPattern=s},function(r,t,e){"use strict";t.decode=t.parse=e(4),t.encode=t.stringify=e(5)},function(r,t,e){"use strict";function n(r,t){return Object.prototype.hasOwnProperty.call(r,t)}r.exports=function(r,t,e,o){t=t||"&",e=e||"=";var i={};if("string"!=typeof r||0===r.length)return i;var u=/\+/g;r=r.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=r.length;s>0&&c>s&&(c=s);for(var f=0;f<c;++f){var p,h,m,l,d=r[f].replace(u,"%20"),g=d.indexOf(e);g>=0?(p=d.substr(0,g),h=d.substr(g+1)):(p=d,h=""),m=decodeURIComponent(p),l=decodeURIComponent(h),n(i,m)?a(i[m])?i[m].push(l):i[m]=[i[m],l]:i[m]=l}return i};var a=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}},function(r,t,e){"use strict";function n(r,t){if(r.map)return r.map(t);for(var e=[],n=0;n<r.length;n++)e.push(t(r[n],n));return e}var a=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};r.exports=function(r,t,e,u){return t=t||"&",e=e||"=",null===r&&(r=void 0),"object"==typeof r?n(i(r),function(i){var u=encodeURIComponent(a(i))+e;return o(r[i])?n(r[i],function(r){return u+encodeURIComponent(a(r))}).join(t):u+encodeURIComponent(a(r[i]))}).join(t):u?encodeURIComponent(a(u))+e+encodeURIComponent(a(r)):""};var o=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},i=Object.keys||function(r){var t=[];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(e);return t}},function(r,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadScript=t.task=t.add=t.register=t.loadMatch=t.reload=t.echo=t.load=t.run=t._run=t.get=t.set=t.config=t.configure=t.log=void 0;var n=e(0),a=t.log={},o=function(){var r=window.performance;return r&&r.now?r.now():0},i=t.configure={debug:!0,warn:console.warn.bind(console),error:console.error.bind(console),trackStart:function(r){var t=a[r]||(a[r]={});t.start||(t.start=~~o())},trackEnd:function(r){var t=a[r]||(a[r]={});t.end||(t.end=~~o())}},u={},s=[],c=t.config=function(r){return Object.assign(i,r)},f=t.set=function(r,t){(u[r]||(u[r]={})).value=t},p=t.get=function r(t){return(0,n.isArray)(t)?t.map(function(t){return r(t)}):u[t]&&u[t].value},h=function(r){var t=r.name,e=r.pretask,n=r.handler;u[t]&&i.debug&&i.warn("loder "+t+" already exist"),s.push(t),u[t]={pretask:e,handler:n}},m=Promise.resolve(null),l=function r(t){var e=t.name,a=t.params,o=t.reload,s=void 0!==o&&o,c=t.handler,f=t.reusePrevParams,p=void 0!==f&&f;if((0,n.isArray)(e))return Promise.all(e.map(function(t){return r({name:t,reload:s,reusePrevParams:s})})).then(function(r){return c?c(r):r});var h=u[e];if(!h)return i.debug&&i.error("loder "+e+": Not Found"),m;i.trackStart(e);var l=function(){var t=h.pretask,o=h.handler;p&&(a=h.prevParams),h.prevParams=a;var u=m;(0,n.isArray)(t)&&(u=r({name:t,reload:s})),h.promise=u.then(function(r){return(0,n.isFunction)(o)?o(a||r):r}).then(function(r){return h.value=r,i.trackEnd(e,r),r})};return!s&&h.promise||l(),h.promise.then(function(r){return(0,n.isFunction)(c)?c(r):r})},d=t._run=function(r){return function(t,e,a){return(0,n.isFunction)(e)&&(a=e,e=void 0),l({name:t,params:e,handler:a,reload:r})}},g=t.run=d(!1),y=t.load=g,v=t.echo=g,P=t.reload=d(!0),b=t.loadMatch=function(r){var t=void 0;if((0,n.isString)(r)?t=new RegExp(r):(0,n.isReg)(r)&&(t=r),t){var e=s.filter(function(r){return t.exec(r)});return l({name:e})}return m},S=t.register=function(r,t,e){if(!(0,n.isString)(r))return i.debug&&i.error("name is required");(0,n.isFunction)(t)&&(e=t,t=void 0),h({name:r,handler:e,pretask:t})},x=t.add=S,w=t.task=S,j=t.loadScript=function(r,t){return new Promise(function(e,n){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.onload=function(){document.body.removeChild(a),e()},a.onerror=function(r){return n(r)},t&&Object.keys(t).forEach(function(r){return a.setAttribute(r,t[r])}),a.src=r,document.body.appendChild(a)})},O=S;Object.assign(O,{log:a,configure:i,register:S,task:w,add:x,config:c,run:g,load:y,echo:v,loadMatch:b,reload:P,get:p,set:f,loadScript:j}),r.exports=O}])});