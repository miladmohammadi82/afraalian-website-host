!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.loder=e():n.loder=e()}("undefined"!=typeof self?self:this,function(){return function(n){function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=n,e.c=r,e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScript=e.task=e.add=e.register=e.loadMatch=e.reload=e.echo=e.load=e.run=e._run=e.get=e.set=e.config=e.configure=e.log=void 0;var t=r(1),o=e.log={},i=function(){var n=window.performance;return n&&n.now?n.now():0},u=e.configure={debug:!0,warn:console.warn.bind(console),error:console.error.bind(console),trackStart:function(n){var e=o[n]||(o[n]={});e.start||(e.start=~~i())},trackEnd:function(n){var e=o[n]||(o[n]={});e.end||(e.end=~~i())}},a={},c=[],s=e.config=function(n){return Object.assign(u,n)},f=e.set=function(n,e){(a[n]||(a[n]={})).value=e},d=e.get=function n(e){return(0,t.isArray)(e)?e.map(function(e){return n(e)}):a[e]&&a[e].value},l=function(n){var e=n.name,r=n.pretask,t=n.handler;a[e]&&u.debug&&u.warn("loder "+e+" already exist"),c.push(e),a[e]={pretask:r,handler:t}},p=Promise.resolve(null),m=function n(e){var r=e.name,o=e.params,i=e.reload,c=void 0!==i&&i,s=e.handler,f=e.reusePrevParams,d=void 0!==f&&f;if((0,t.isArray)(r))return Promise.all(r.map(function(e){return n({name:e,reload:c,reusePrevParams:c})})).then(function(n){return s?s(n):n});var l=a[r];if(!l)return u.debug&&u.error("loder "+r+": Not Found"),p;u.trackStart(r);var m=function(){var e=l.pretask,i=l.handler;d&&(o=l.prevParams),l.prevParams=o;var a=p;(0,t.isArray)(e)&&(a=n({name:e,reload:c})),l.promise=a.then(function(n){return(0,t.isFunction)(i)?i(o||n):n}).then(function(n){return l.value=n,u.trackEnd(r,n),n})};return!c&&l.promise||m(),l.promise.then(function(n){return(0,t.isFunction)(s)?s(n):n})},v=e._run=function(n){return function(e,r,o){return(0,t.isFunction)(r)&&(o=r,r=void 0),m({name:e,params:r,handler:o,reload:n})}},y=e.run=v(!1),b=e.load=y,g=e.echo=y,h=e.reload=v(!0),P=e.loadMatch=function(n){var e=void 0;if((0,t.isString)(n)?e=new RegExp(n):(0,t.isReg)(n)&&(e=n),e){var r=c.filter(function(n){return e.exec(n)});return m({name:r})}return p},x=e.register=function(n,e,r){if(!(0,t.isString)(n))return u.debug&&u.error("name is required");(0,t.isFunction)(e)&&(r=e,e=void 0),l({name:n,handler:r,pretask:e})},j=e.add=x,S=e.task=x,k=e.loadScript=function(n,e){return new Promise(function(r,t){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.onload=function(){document.body.removeChild(o),r()},o.onerror=function(n){return t(n)},e&&Object.keys(e).forEach(function(n){return o.setAttribute(n,e[n])}),o.src=n,document.body.appendChild(o)})},w=x;Object.assign(w,{log:o,configure:u,register:x,task:S,add:j,config:s,run:y,load:b,echo:g,loadMatch:P,reload:h,get:d,set:f,loadScript:k}),n.exports=w},function(n,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=e.isType=function(n){return function(e){return(void 0===e?"undefined":t(e))==n}},i=(e.isString=function(n){return o("string")(n)},e.isArray=function(n){return o("object")(n)&&!!n.slice});e.isFunction=function(n){return o("function")(n)},e.isBoolean=function(n){return o("boolean")(n)},e.isPlainObject=function(n){return o("object")(n)&&!i(n)},e.isUndefined=function(n){return o("undefined")(n)},e.isPromise=function(n){return n instanceof Promise},e.isReg=function(n){return n instanceof RegExp},e.noop=function(){}}])});